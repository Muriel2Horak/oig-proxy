SQL Script: timeline_corrected.sql
Database: analysis/ha_snapshot/payloads.db
============================================================

STATEMENT 1: CREATE TEMP TABLE IF NOT EXISTS cloud_settings AS
SELECT 
    id,
    ts as timestamp,
    'current_...
--------------------------------------------------
NOTE: Non-SELECT statement executed

STATEMENT 2: CREATE TEMP TABLE IF NOT EXISTS box_setting_acks AS
SELECT 
    id,
    ts as timestamp,
    'curren...
--------------------------------------------------
NOTE: Non-SELECT statement executed

STATEMENT 3: CREATE TEMP TABLE IF NOT EXISTS tbl_events AS
SELECT 
    id,
    ts as timestamp,
    'current_db' ...
--------------------------------------------------
NOTE: Non-SELECT statement executed

STATEMENT 4: CREATE TEMP TABLE IF NOT EXISTS isnewset_frames AS
SELECT 
    id,
    ts as timestamp,
    'current...
--------------------------------------------------
NOTE: Non-SELECT statement executed

STATEMENT 5: SELECT '=== ZÁKLADNÍ STATISTIKY ===' as section
--------------------------------------------------
Rows returned: 1
Columns: section

Data:
  1: ('=== ZÁKLADNÍ STATISTIKY ===',)

STATEMENT 6: SELECT 
    'CLOUD SETTINGS' as event_type,
    COUNT(*) as count
FROM cloud_settings
UNION ALL
SELE...
--------------------------------------------------
Rows returned: 4
Columns: event_type, count

Data:
  1: ('CLOUD SETTINGS', 209)
  2: ('SETTING ACKS', 0)
  3: ('TBL_EVENTS (Setting)', 0)
  4: ('ISNEWSET FRAMES', 0)

STATEMENT 7: SELECT '=== MATCHED SETTING→ACK PAIRS (±30s) ===' as section
--------------------------------------------------
Rows returned: 1
Columns: section

Data:
  1: ('=== MATCHED SETTING→ACK PAIRS (±30s) ===',)

STATEMENT 8: CREATE TEMP TABLE IF NOT EXISTS matched_pairs AS
SELECT 
    cs.id as cloud_setting_id,
    cs.times...
--------------------------------------------------
NOTE: Non-SELECT statement executed

STATEMENT 9: SELECT 
    COUNT(*) as matched_pairs_count,
    AVG(delta_seconds) as avg_delta_seconds,
    MIN(de...
--------------------------------------------------
Rows returned: 1
Columns: matched_pairs_count, avg_delta_seconds, min_delta_seconds, max_delta_seconds

Data:
  1: (0, None, None, None)

STATEMENT 10: SELECT '=== GHOST ACKS (ACKs bez odpovídajícího Setting v ±30s) ===' as section
--------------------------------------------------
Rows returned: 1
Columns: section

Data:
  1: ('=== GHOST ACKS (ACKs bez odpovídajícího Setting v ±30s) ===',)

STATEMENT 11: CREATE TEMP TABLE IF NOT EXISTS ghost_acks AS
SELECT 
    ba.id as box_ack_id,
    ba.timestamp as b...
--------------------------------------------------
NOTE: Non-SELECT statement executed

STATEMENT 12: SELECT 
    COUNT(*) as ghost_acks_count
FROM ghost_acks
--------------------------------------------------
Rows returned: 1
Columns: ghost_acks_count

Data:
  1: (0,)

STATEMENT 13: SELECT '=== ORPHAN SETTINGS (Settings bez odpovídajícího ACK v ±30s) ===' as section
--------------------------------------------------
Rows returned: 1
Columns: section

Data:
  1: ('=== ORPHAN SETTINGS (Settings bez odpovídajícího ACK v ±30s) ===',)

STATEMENT 14: CREATE TEMP TABLE IF NOT EXISTS orphan_settings AS
SELECT 
    cs.id as cloud_setting_id,
    cs.tim...
--------------------------------------------------
NOTE: Non-SELECT statement executed

STATEMENT 15: SELECT 
    COUNT(*) as orphan_settings_count
FROM orphan_settings
--------------------------------------------------
Rows returned: 1
Columns: orphan_settings_count

Data:
  1: (209,)

STATEMENT 16: SELECT '=== DENNÍ SOUHRNY UDÁLOSTÍ ===' as section
--------------------------------------------------
Rows returned: 1
Columns: section

Data:
  1: ('=== DENNÍ SOUHRNY UDÁLOSTÍ ===',)

STATEMENT 17: CREATE TEMP TABLE IF NOT EXISTS daily_counts AS
SELECT 
    DATE(timestamp) as event_date,
    COUNT...
--------------------------------------------------
ERROR: no such column: event_type_detail

STATEMENT 18: SELECT * FROM daily_counts
--------------------------------------------------
ERROR: no such table: daily_counts

STATEMENT 19: SELECT '=== GHOST ACKS PODLE DNŮ ===' as section
--------------------------------------------------
Rows returned: 1
Columns: section

Data:
  1: ('=== GHOST ACKS PODLE DNŮ ===',)

STATEMENT 20: CREATE TEMP TABLE IF NOT EXISTS ghost_acks_daily AS
SELECT 
    DATE(box_ack_time) as ghost_ack_date...
--------------------------------------------------
NOTE: Non-SELECT statement executed

STATEMENT 21: SELECT * FROM ghost_acks_daily
--------------------------------------------------
Rows returned: 0
Columns: ghost_ack_date, ghost_ack_count

STATEMENT 22: SELECT '=== PŘÍKLADY GHOST ACKS (prvních 5) ===' as section
--------------------------------------------------
Rows returned: 1
Columns: section

Data:
  1: ('=== PŘÍKLADY GHOST ACKS (prvních 5) ===',)

STATEMENT 23: SELECT 
    box_ack_time as timestamp,
    SUBSTR(content, 1, 100) as content_preview
FROM ghost_ack...
--------------------------------------------------
Rows returned: 0
Columns: timestamp, content_preview

STATEMENT 24: SELECT '=== PŘÍKLADY ORPHAN SETTINGS (prvních 5) ===' as section
--------------------------------------------------
Rows returned: 1
Columns: section

Data:
  1: ('=== PŘÍKLADY ORPHAN SETTINGS (prvních 5) ===',)

STATEMENT 25: SELECT 
    cloud_setting_time as timestamp,
    SUBSTR(parsed_preview, 1, 100) as setting_preview
F...
--------------------------------------------------
Rows returned: 5
Columns: timestamp, setting_preview

Data:
  1: ('2025-12-11T15:20:22.031323+00:00', '{"_table": "tbl_invertor_prms", "_device_id": "2206237016", "_dt": "2025-12-11 16:10:00", "ERR_PV": ')
  2: ('2025-12-11T15:21:59.260954+00:00', '{"_table": "tbl_invertor_prms", "_device_id": "2206237016", "_dt": "2025-12-11 16:20:00", "ERR_PV": ')
  3: ('2025-12-11T18:05:58.850399+00:00', '{"_table": "tbl_batt_prms", "_device_id": "2206237016", "_dt": "2025-12-11 19:05:00", "BAT_N": 3, "B')
  4: ('2025-12-11T18:06:03.665796+00:00', '{"_table": "tbl_invertor_prms", "_device_id": "2206237016", "_dt": "2025-12-11 19:05:00", "ERR_PV": ')
  5: ('2025-12-11T18:06:10.244426+00:00', '{"_table": "tbl_box_prms", "_device_id": "2206237016", "_dt": "2025-12-11 19:05:00", "ISON": 1, "FAI')

STATEMENT 26: SELECT '=== KONTROLA: 23. LEDNA 2026 (očekáváno 7 ghost ACKs) ===' as section
--------------------------------------------------
Rows returned: 1
Columns: section

Data:
  1: ('=== KONTROLA: 23. LEDNA 2026 (očekáváno 7 ghost ACKs) ===',)

STATEMENT 27: SELECT 
    COUNT(*) as jan_23_ghost_acks
FROM ghost_acks 
WHERE DATE(box_ack_time) = '2026-01-23'
--------------------------------------------------
Rows returned: 1
Columns: jan_23_ghost_acks

Data:
  1: (0,)

STATEMENT 28: SELECT '=== KONTROLA: POSLEDNÍ CLOUD SETTING (očekáváno 4.1.2026 17:37:40) ===' as section
--------------------------------------------------
Rows returned: 1
Columns: section

Data:
  1: ('=== KONTROLA: POSLEDNÍ CLOUD SETTING (očekáváno 4.1.2026 17:37:40) ===',)

STATEMENT 29: SELECT 
    timestamp,
    parsed_preview
FROM cloud_settings
WHERE timestamp LIKE '2026-01-04%'
ORD...
--------------------------------------------------
Rows returned: 0
Columns: timestamp, parsed_preview

STATEMENT 30: SELECT '=== ANALÝZA DOKONČENA ===' as status
--------------------------------------------------
Rows returned: 1
Columns: status

Data:
  1: ('=== ANALÝZA DOKONČENA ===',)

STATEMENT 31: DROP TABLE IF EXISTS cloud_settings
--------------------------------------------------
NOTE: Non-SELECT statement executed

STATEMENT 32: DROP TABLE IF EXISTS box_setting_acks
--------------------------------------------------
NOTE: Non-SELECT statement executed

STATEMENT 33: DROP TABLE IF EXISTS tbl_events
--------------------------------------------------
NOTE: Non-SELECT statement executed

STATEMENT 34: DROP TABLE IF EXISTS isnewset_frames
--------------------------------------------------
NOTE: Non-SELECT statement executed

STATEMENT 35: DROP TABLE IF EXISTS matched_pairs
--------------------------------------------------
NOTE: Non-SELECT statement executed

STATEMENT 36: DROP TABLE IF EXISTS ghost_acks
--------------------------------------------------
NOTE: Non-SELECT statement executed

STATEMENT 37: DROP TABLE IF EXISTS orphan_settings
--------------------------------------------------
NOTE: Non-SELECT statement executed

STATEMENT 38: DROP TABLE IF EXISTS daily_counts
--------------------------------------------------
NOTE: Non-SELECT statement executed

STATEMENT 39: DROP TABLE IF EXISTS ghost_acks_daily
--------------------------------------------------
NOTE: Non-SELECT statement executed

============================================================
SCRIPT SUMMARY: timeline_corrected.sql
Total rows: 24
Status: FAIL - SQL error
